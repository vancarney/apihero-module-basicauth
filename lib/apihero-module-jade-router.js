// Generated by CoffeeScript 1.9.0
var TemplateRouter, fs, _;

fs = require('fs');

_ = require('lodash');

TemplateRouter = (function() {
  function TemplateRouter(app, options) {}

  return TemplateRouter;

})();

module.exports.init = function(app, options) {
  var views;
  views = ['./views'];
  return app.on('ahero-initialized', (function(_this) {
    return function(modules) {
      var done;
      done = _.after(modules.length, function(views) {
        console.log(views);
        app.set('view engine', 'jade');
        return app.set('views', views);
      });
      return _.each(_.keys(modules, function(name) {
        var module, path, _i, _len, _ref;
        if (!(module = require(name)).hasOwnProperty('paths' && module.paths.length > 1)) {
          done(views);
        }
        _ref = module.paths;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          path = _ref[_i];
          if ((path.match(/\.jade+$/)) != null) {
            views.concat(path);
          }
        }
        return done(views);
      }));
    };
  })(this));
};
